<!-- views/partials/hero.ejs -->
<section class="hero-surface relative overflow-visible py-16 md:py-24">
  <!-- Dekor: diskret rutnät -->
  <div aria-hidden="true" class="pointer-events-none absolute inset-0 opacity-[0.06] dark:opacity-[0.12]">
    <svg class="h-full w-full" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="grid" width="32" height="32" patternUnits="userSpaceOnUse">
          <path d="M32 0H0V32" fill="none" stroke="currentColor" stroke-width="1"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#grid)" class="text-slate-900 dark:text-white"></rect>
    </svg>
  </div>

  <div class="relative mx-auto max-w-6xl px-4">
    <div class="grid items-center gap-10 md:grid-cols-5">
      <!-- Copy -->
      <div class="text-center md:text-left md:col-span-3">
        <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white">
          Hitta guider och svar för din <span class="text-sky-600 dark:text-red-500">motoroptimering</span>
        </h1>
        <p class="mt-3 text-slate-600 dark:text-slate-300">
          Sök bland guider & ämnen – från grundläggande installation till avancerad mappning.
        </p>

       <!-- Sök (med autosuggest) -->
<div class="mt-7 max-w-3xl mx-auto md:mx-0">
  <div class="relative">
    <div class="flex gap-3">
      <input
        id="q"
        type="search"
        name="q_search"
        placeholder="Sök efter ämnen…"
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="false"
        inputmode="search"
        aria-autocomplete="none"
        results="0"
        class="flex-1 rounded-xl border border-slate-300 dark:border-slate-700 px-4 py-3 
               text-slate-900 dark:text-slate-100 bg-white dark:bg-slate-900 shadow-sm 
               focus:border-sky-500 focus:ring-sky-500"
      />
      <button
        id="btnSearch"
        type="button"
        class="rounded-xl bg-sky-600 dark:bg-red-600 text-white px-6 py-3 font-semibold 
               shadow hover:bg-sky-700 dark:hover:bg-red-700"
      >
        Sök
      </button>
    </div>

            <!-- Förslagslista -->
            <div
              id="suggestBox"
              class="absolute left-0 right-[96px] mt-2 bg-white dark:bg-slate-900 
                     border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg 
                     hidden z-[9999] overflow-visible"
            ></div>
          </div>

          <% if (typeof popularTags !== 'undefined' && popularTags.length) { %>
            <div class="mt-4 flex flex-wrap items-center gap-2 <%= (popularTags && popularTags.length) ? 'justify-center md:justify-start' : '' %>">
              <span class="text-sm text-slate-600 dark:text-slate-400 mr-1">Populärt:</span>
              <% popularTags.forEach(t => { %>
                <button
                  data-tag="<%= t %>"
                  class="tag-btn text-xs rounded-full px-3 py-1 border border-slate-300 dark:border-slate-700 
                         text-slate-700 dark:text-slate-200 hover:border-sky-400 hover:text-sky-700 
                         dark:hover:border-red-500 dark:hover:text-red-400"
                ><%= t %></button>
              <% }) %>
            </div>
          <% } %>
        </div>
      </div>

      <!-- Bild / Lottie animation -->
      <div class="md:col-span-2 hidden md:block">
        <div class="relative mx-auto w-full max-w-sm">
<div id="lottieEngine" class="w-64 h-64 mx-auto scale-125"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Lottie -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    lottie.loadAnimation({
      container: document.getElementById('lottieEngine'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: '/public/animations/hero.json' // <-- byt till din egen Lottie-fil
    });
  });
</script>