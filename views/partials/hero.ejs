<section class="relative min-h-[320px] md:min-h-[360px] py-12 md:py-16 overflow-hidden">
  <!-- Bakgrundsbild (ligger under innehållet men inte negativt) -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="h-full w-full"
         style="background:url('public/hero.jpg') center/cover no-repeat;"></div>
    <!-- Svag overlay för läsbarhet -->
    <div class="absolute inset-0 bg-gradient-to-br from-white/50 via-white/30 to-transparent
                dark:from-slate-900/70 dark:via-slate-900/50"></div>
  </div>
  <!-- Innehåll -->
  <div class="relative mx-auto max-w-6xl px-4">
    <div class="grid items-center gap-10 md:grid-cols-5">
      <!-- Copy -->
      <div class="text-center md:text-left md:col-span-3">
        <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight text-slate-900 dark:text-white">
          Hitta guider och svar för din <span class="text-sky-600 dark:text-red-500">motoroptimering</span>
        </h1>
        <p class="mt-3 text-slate-600 dark:text-slate-300">
          Sök bland guider & ämnen – från grundläggande installation till avancerad mappning.
        </p>

        <!-- Sök (med autosuggest) -->
        <div class="mt-7 max-w-3xl mx-auto md:mx-0">
          <div class="relative">
            <div class="flex gap-3">
              <input
                id="q"
                type="search"
                name="q_search"
                placeholder="Sök efter ämnen…"
                autocomplete="off"
                autocorrect="off"
                autocapitalize="off"
                spellcheck="false"
                inputmode="search"
                aria-autocomplete="none"
                results="0"
                class="flex-1 rounded-xl border border-slate-300 dark:border-slate-700 px-4 py-3 
                       text-slate-900 dark:text-slate-100 bg-white dark:bg-slate-900 shadow-sm 
                       focus:border-sky-500 focus:ring-sky-500"
              />
              <button
                id="btnSearch"
                type="button"
                class="rounded-xl bg-sky-600 dark:bg-red-600 text-white px-6 py-3 font-semibold 
                       shadow hover:bg-sky-700 dark:hover:bg-red-700"
              >
                Sök
              </button>
            </div>

            <!-- Förslagslista -->
            <div
              id="suggestBox"
              class="absolute left-0 right-[96px] mt-2 bg-white dark:bg-slate-900 
                     border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg 
                     hidden z-[9999] overflow-visible">
            </div>
          </div>

          <% const tags6 = (popularTags || []).slice(0, 6); %>
          <% if (tags6.length) { %>
            <div class="mt-4 flex flex-wrap items-center gap-2 <%= tags6.length ? 'justify-center md:justify-start' : '' %>">
              <span class="text-sm text-slate-600 dark:text-slate-400 mr-1">Populärt:</span>
              <%
                const qParam   = (typeof q   !== 'undefined' && q)   ? '&q='  + encodeURIComponent(q)   : '';
                const catParam = (typeof cat !== 'undefined' && cat) ? '&cat='+ encodeURIComponent(cat) : '';
              %>
              <% tags6.forEach(t => { %>
                <a
                  href="/explore?tab=all&tag=<%= encodeURIComponent(t) %><%- qParam %><%- catParam %>"
                  class="text-xs rounded-full px-3 py-1 border border-slate-300 dark:border-slate-700 
                         text-slate-700 dark:text-slate-200 hover:border-sky-400 hover:text-sky-700 
                         dark:hover:border-red-500 dark:hover:text-red-400">
                  <%= t.split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ') %>
                </a>
              <% }) %>
            </div>
          <% } %>
        </div>
      </div>

      <!-- Bild / Lottie animation -->
      <div class="md:col-span-2 hidden md:block">
        <div class="relative mx-auto w-full max-w-x1">
          <div id="lottieEngine" class="w-64 h-64 mx-auto scale-150"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Lottie -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    lottie.loadAnimation({
      container: document.getElementById('lottieEngine'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: '/public/animations/hero2.json'
    });
  });
</script>