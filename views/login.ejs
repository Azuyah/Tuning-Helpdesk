<section class="mx-auto max-w-md px-4 py-12">
  <div class="bg-white rounded-2xl shadow-lg border border-slate-200 p-8">
    <h1 class="text-2xl font-bold text-slate-900 mb-6">Logga in</h1>

    <% if (typeof error !== 'undefined' && error) { %>
      <div class="mb-4 rounded-lg border border-red-200 bg-red-50 text-red-700 px-4 py-3 text-sm">
        <%= error %>
      </div>
    <% } %>

    <form method="post" action="/login" class="space-y-6">
      <!-- vart vi ska efter inloggning (kan sättas från server eller query) -->
      <input type="hidden" name="next" id="nextField" value="<%= typeof next !== 'undefined' ? next : '/' %>">

      <!-- E-post -->
      <div>
        <label for="email" class="block text-sm font-medium text-slate-700">E-post</label>
        <input type="email" name="email" id="email" required
               class="mt-1 block w-full rounded-lg border border-slate-300 px-3 py-2 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"/>
      </div>

      <!-- Lösenord -->
      <div>
        <label for="password" class="block text-sm font-medium text-slate-700">Lösenord</label>
        <input type="password" name="password" id="password" required
               class="mt-1 block w-full rounded-lg border border-slate-300 px-3 py-2 shadow-sm focus:border-sky-500 focus:ring-sky-500 sm:text-sm"/>
      </div>

      <!-- Knapp -->
      <button type="submit"
              class="w-full rounded-lg bg-sky-600 px-6 py-3 text-white font-semibold shadow hover:bg-sky-700">
        Logga in
      </button>
    </form>

    <p class="mt-6 text-sm text-slate-600 text-center">
      Har du inget konto?
      <a href="/register" class="text-sky-600 hover:underline">Skapa konto</a>
    </p>
  </div>
</section>

<script>
  // Om server inte gav "next", plocka från ?next= i URL:en och sätt hidden-fältet.
  (function () {
    var nf = document.getElementById('nextField');
    if (nf && (!nf.value || nf.value === '/')) {
      var p = new URLSearchParams(location.search);
      var nx = p.get('next');
      if (nx) nf.value = nx;
    }
  })();
</script>